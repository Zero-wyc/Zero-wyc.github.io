import{_ as c}from"./ValaxyMain.vue_vue_type_style_index_0_lang._Xu9RLDj.js";import"./chunks/@vueuse/motion.DU-xywca.js";import{e as F,u as g,a as u}from"./chunks/vue-router.Dql23lD-.js";import{X as y,b_ as l,be as e,_ as s,Y as E,a5 as i,bB as C,b3 as m,b5 as b}from"./framework.jNhEyyjH.js";import"./app.CZU402sU.js";import"./chunks/dayjs.CjxPwwjX.js";import"./chunks/vue-i18n.0CjnfSQt.js";import"./chunks/pinia.6eUgXCPV.js";/* empty css                    */import"./chunks/nprogress.BAtNyfm-.js";import"./YunComment.vue_vue_type_style_index_0_lang.BaEVNwbj.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.Cj2pgZcY.js";import"./post.Kz-7pl6O.js";const B=F("/posts/Docker的下载安装和使用",async t=>JSON.parse('{"title":"Docker的下载安装和使用","description":"","frontmatter":{"hide":false,"title":"Docker的下载安装和使用","date":"2025-12-27","updated":"2025-12-27","categories":"搞机日志","cover":"https://github.cdn.zero251.xyz/Zero-wyc/Image/main/All/20251227212517919.webp","tags":["搞机日志","Linux","经验"]},"headers":[],"relativePath":"pages/posts/Docker的下载安装和使用.md","lastUpdated":1771996084000}'),{lazy:(t,h)=>t.name===h.name}),q={__name:"Docker的下载安装和使用",setup(t,{expose:h}){const{data:r}=B(),o=u(),p=g(),k=Object.assign(p.meta.frontmatter||{},r.value?.frontmatter||{});return o.currentRoute.value.data=r.value,b("valaxy:frontmatter",k),globalThis.$frontmatter=k,h({frontmatter:{hide:!1,title:"Docker的下载安装和使用",date:"2025-12-27",updated:"2025-12-27",categories:"搞机日志",cover:"https://github.cdn.zero251.xyz/Zero-wyc/Image/main/All/20251227212517919.webp",tags:["搞机日志","Linux","经验"]}}),(a,n)=>{const d=c;return m(),y(d,{frontmatter:C(k)},{"main-content-md":l(()=>[n[0]||(n[0]=s("blockquote",null,[s("p",null,"Docker 是什么？"),s("p",null,[i("Docker 是一个 "),s("strong",null,"开源的容器化平台"),i("，核心作用是“"),s("strong",null,"把应用+运行环境一起打包成镜像"),i("”，解决环境问题无法部署的经典难题，且容器与宿主机完全隔离，容器内的事情不会影响到主机")])],-1)),E(" more "),n[1]||(n[1]=s("hr",null,null,-1)),n[2]||(n[2]=s("ol",null,[s("li",null,[s("h3",{id:"安装docker",tabindex:"-1"},[i("安装Docker "),s("a",{class:"header-anchor",href:"#安装docker","aria-label":'Permalink to "安装Docker"'},"​")]),s("ol",null,[s("li",null,[s("p",null,[i("由于docker官方源和镜像源链接都被墙，所以这里使用阿里源进行安装（"),s("code",null,"docker search"),i("命令会直接查询Docker Hub，因此配置加速器之后仍然无法使用）")])]),s("li",null,[s("p",null,"安装Docker社区版本"),s("ol",null,[s("li",null,[s("blockquote",null,[s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"#更新包管理工具")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt-get"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," update")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"#添加Docker软件包源")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt-get"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -y"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt-transport-https"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ca-certificates"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," curl"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," software-properties-common")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," curl"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -fsSL"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," https://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," |"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt-key"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," add"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," -")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," add-apt-repository"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -y"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "deb [arch=$('),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"dpkg"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --print-architecture"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},")] https://mirrors.aliyun.com/docker-ce/linux/ubuntu $("),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"lsb_release"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -cs"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},') stable"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"#安装Docker社区版本，容器运行时containerd.io，以及Docker构建和Compose插件")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt-get"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -y"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker-ce"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker-ce-cli"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," containerd.io"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker-buildx-plugin"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker-compose-plugin")])])]),s("button",{class:"code-block-unfold-btn"})])])])])]),s("li",null,[s("p",null,"启动Docker并设置开机自启"),s("ol",null,[s("li",null,[s("blockquote",null,[s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"#启动Docker")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," systemctl"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," start"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"#设置Docker守护进程在系统启动时自动启动")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," systemctl"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," enable"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker")])])]),s("button",{class:"code-block-unfold-btn"})])])])])])])]),s("li",null,[s("h3",{id:"配置镜像源",tabindex:"-1"},[i("配置镜像源 "),s("a",{class:"header-anchor",href:"#配置镜像源","aria-label":'Permalink to "配置镜像源"'},"​")]),s("ol",null,[s("li",null,[s("p",null,[i("编辑Docker配置文件"),s("code",null,"/etc/docker/daemon.json"),i("。若文件不存在，先创建。")]),s("ol",null,[s("li",null,[s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"vim"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /etc/docker/daemon.json")])])]),s("button",{class:"code-block-unfold-btn"})])]),s("li",null,[s("blockquote",null,[s("div",{class:"language-json"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"json"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"{")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},'    "registry-mirrors"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": ["),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"<加速器地址>"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"]")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),s("button",{class:"code-block-unfold-btn"})])])]),s("li",null,[s("p",null,[i("这里的加速器地址推荐毫秒镜像，填入"),s("code",null,"docker.1ms.run"),i("至加速器地址即可")])]),s("li",null,[s("p",null,"重启Docker服务应用新配置"),s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," systemctl"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," restart"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker")])])]),s("button",{class:"code-block-unfold-btn"})])])])])])]),s("li",null,[s("h3",{id:"创建一个docker容器的命令",tabindex:"-1"},[i("创建一个docker容器的命令 "),s("a",{class:"header-anchor",href:"#创建一个docker容器的命令","aria-label":'Permalink to "创建一个docker容器的命令"'},"​")]),s("ol",null,[s("li",null,[s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," run"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -d"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --name"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," frps"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --hostname"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," frps"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  --network"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," bridge"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\ "),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                # 如用 host 模式就换成 --network host")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  --restart"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," always"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -p"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 7000:7000"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 7500:7500"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 80:8080"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 443:8443"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -v"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /data/frps.toml:/etc/frp/frps.toml:ro"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -v"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /data/ssl:/etc/frp/ssl"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  snowdreamtech/frps:latest")])])]),s("button",{class:"code-block-unfold-btn"})])])])]),s("li",null,[s("h2",{id:"docker-compose",tabindex:"-1"},[s("strong",null,"Docker Compose"),i(),s("a",{class:"header-anchor",href:"#docker-compose","aria-label":'Permalink to "**Docker Compose**"'},"​")]),s("blockquote",null,[s("p",null,[i("Docker Compose是“将多个容器配置、网络、挂卷、变量、依赖”写进 "),s("strong",null,"docker-compose.yml"),i(" 文件，极大增加部署效率")])]),s("ol",null,[s("li",null,[s("h4",{id:"安装docker-compose",tabindex:"-1"},[i("安装Docker Compose "),s("a",{class:"header-anchor",href:"#安装docker-compose","aria-label":'Permalink to "安装Docker Compose"'},"​")]),s("ol",null,[s("li",null,[s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"sudo"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," apt-get"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -y"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," install"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker-compose-plugin")])])]),s("button",{class:"code-block-unfold-btn"})])])])]),s("li",null,[s("h4",{id:"docker-compose的编写和修改",tabindex:"-1"},[i("Docker Compose的编写和修改 "),s("a",{class:"header-anchor",href:"#docker-compose的编写和修改","aria-label":'Permalink to "Docker Compose的编写和修改"'},"​")]),s("ol",null,[s("li",null,[s("p",null,"大部分的容器作者都会给一个基础的Docker Compose文件，那么这里面的每一行配置都是什么意思呢？这里做个大概解释，")]),s("li",null,[s("p",null,"这里以mcsmanager的前后端做个例子"),s("ol",null,[s("li",null,[s("div",{class:"language-dockerfile"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"dockerfile"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"services:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  web: #项目名称,一个compose内可以有多个容器")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    image: githubyumao/mcsmanager-web:latest     #镜像名称:版本名称(这个一般填latest就好)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    container_name: mcsmanager-web #容器名称(可选)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    deploy: #容器配置(可选)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      resources:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        limits:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"          cpus: "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'0.50'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," #自定义可用的CPU核心数")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"          memory: 512M #自定义可用的内存大小")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    network_mode: bridge ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    #网络模式，bridge(默认的模式,桥接,独立分配IP")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    #host(直接使用实体网络)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    #container(使用其他容器网络)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    #none(无网络))")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ports:                  # host模式下不需要这个以及下面的端口")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      - "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"23333:23333"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"       # 前面的是容器内端口，后面的对外端口")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    restart: always ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    #no:用不自动重启(默认模式）")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    #always:无论是否闪退都重启,Docker启动时也启动")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    #on-failure:退出码非0才重启,可带次数如 on-failure:5 (最多重试 5 次)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    #unless-stopped:类似 always，但手动stop后不再自动重启,之后即使docker重启时也不会再启动")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    volumes:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"      #容器映射的目录，如果不填写这个，在容器更新时内部数据会全部删除")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"      #前面是实体机要映射的目录，后面是容器内所需映射的目录，这个容器作者一般会给，需要自定义的是前者")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      - /volume4/data/mcsmanager/web/data:/opt/mcsmanager/web/data")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      - /volume4/data/mcsmanager/web/logs:/opt/mcsmanager/web/logs")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    environment: #环境变量(可选)，这边的变量需要根据项目所给的文档来个性化配置")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      - PUID=${PUID} #自定义用户ID，避免权限问题")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      - PGID=${PGID} #自定义用户组ID，避免权限问题")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      - TZ=Asia/Shanghai #时区设置，可根据需要修改")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  daemon: #mcsmanager的后端，后续一样的配置项不再赘述")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    image: githubyumao/mcsmanager-daemon:latest")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    restart: unless-stopped")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ports:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      - "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"24444:24444"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      - "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"25565:25565"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    environment:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      - MCSM_DOCKER_WORKSPACE_PATH=/volume4/data/mcsmanager/daemon/data/InstanceData")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      - TZ=Asia/Shanghai ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    volumes:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      - /volume4/data/mcsmanager/daemon/data:/opt/mcsmanager/daemon/data")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      - /volume4/data/mcsmanager/daemon/logs:/opt/mcsmanager/daemon/logs")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      - /var/run/docker.sock:/var/run/docker.sock")])])]),s("button",{class:"code-block-unfold-btn"})])])])]),s("li",null,[s("p",null,"这里也一并给方便一个配置docker的compose精简模板"),s("ol",null,[s("li",null,[s("div",{class:"language-dockerfile"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"dockerfile"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"services:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  name_of_service:  # 服务名称，自定义")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    image: image:latest    ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    network_mode: bridge")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    #网络模式，bridge(默认的模式,桥接,独立分配IP")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    #host(直接使用实体网络)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    #container(使用其他容器网络)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    #none(无网络))")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ports:                 ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      - "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"<container_port>:<host_port>"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"          # 前面的是容器内端口，后面的对外端口")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    restart:unless-stopped")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    #no:用不自动重启(默认模式")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    #always:无论是否闪退都重启,Docker启动时也启动")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    #on-failure:退出码非0才重启,可带次数如 on-failure:5 (最多重试 5 次)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    #unless-stopped:类似 always，但手动stop后不再自动重启,之后即使docker重启时也不会再启动")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    volumes:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"      #前面是实体机要映射的目录，后面是容器内所需映射的目录")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      - /data/xxxx.toml:/data/xxxx.toml")])])]),s("button",{class:"code-block-unfold-btn"})])])])])])]),s("li",null,[s("h4",{id:"写完docker-compose之后现在启动项目",tabindex:"-1"},[i("写完docker compose之后现在启动项目 "),s("a",{class:"header-anchor",href:"#写完docker-compose之后现在启动项目","aria-label":'Permalink to "写完docker compose之后现在启动项目"'},"​")]),s("ol",null,[s("li",null,[s("p",null,[i("重命名文件，如果直接"),s("code",null,"docker compose up -d"),i("的话会默认读取所在目录下的"),s("code",null,"docker-compose.yml"),i("进行创建")])]),s("li",null,[s("p",null,"检查语法（可选）"),s("ol",null,[s("li",null,[s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," compose"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," config"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  #把变量全部展开后打印，有错会报错，当且仅当compose文件名字为docker-compose.yml时直接使用")])])]),s("button",{class:"code-block-unfold-btn"})]),s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," compose"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -f"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," docker-compose.yml"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," config"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"          # 自定义compose名字之后，自行修改docker-compose.yml的名字")])])]),s("button",{class:"code-block-unfold-btn"})])])])]),s("li",null,[s("p",null,"启动"),s("ol",null,[s("li",null,[s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," compose"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," up"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -d"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"           # -d = 后台运行；不加 -d 会挂在前台")])])]),s("button",{class:"code-block-unfold-btn"})]),s("p",null,"首次会自动拉镜像、建网络、起容器，终端显示："),s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[+] Running 3/3")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," ✔"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," Network"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," myproj_default"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"   Created")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," ✔"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," Container"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," myproj-web-1"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"   Started")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," ✔"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," Container"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," myproj-redis-1"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," Started")])])]),s("button",{class:"code-block-unfold-btn"})])]),s("li",null,[s("p",null,"若自定义过文件名则，下文需自定义文件名的便不再赘述"),s("ol",null,[s("li",null,[s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," compose"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -f"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," prod.yml"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," up"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -d")])])]),s("button",{class:"code-block-unfold-btn"})])])])])])]),s("li",null,[s("p",null,"使用命令创建Docker（不推荐，仅部署一次的项目上使用；以frps为例）"),s("ol",null,[s("li",null,[s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," run"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -d"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --name"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," frps"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --hostname"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," frps"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  --network"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," bridge"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\ "),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"                # 如用 host 模式就换成 --network host")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  --restart"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," always"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -p"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 7000:7000"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 7500:7500"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 80:8080"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 443:8443"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -v"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /data/frps.toml:/etc/frp/frps.toml:ro"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  -v"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /data/ssl:/etc/frp/ssl"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," \\")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"  snowdreamtech/frps:latest")])])]),s("button",{class:"code-block-unfold-btn"})])]),s("li",null,[s("p",null,"说明："),s("ul",null,[s("li",null,[s("code",null,"-p 宿主机:容器"),i(" 就是 compose 里的 "),s("code",null,"ports:")]),s("li",null,[s("code",null,"-v"),i(" 就是 "),s("code",null,"volumes:")]),s("li",null,[s("code",null,"-e"),i(" / "),s("code",null,"--env-file"),i(" 就是 "),s("code",null,"environment:"),i(" / "),s("code",null,"env_file:")]),s("li",null,[s("code",null,"--restart"),i(" 对应 "),s("code",null,"restart:")]),s("li",null,[s("code",null,"--network"),i(" 对应 "),s("code",null,"networks:")]),s("li",null,[s("code",null,"-l"),i(" 就是 "),s("code",null,"labels:")])])]),s("li",null,[s("p",null,"常用后续命令"),s("ol",null,[s("li",null,[s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," logs"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -f"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," frps")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," stop"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," frps"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," #停止镜像")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," rm"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," frps"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}}," #删除镜像")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," image"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," prune"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -f"),s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        # 清理无用镜像")])])]),s("button",{class:"code-block-unfold-btn"})])])])])])])])])])]),s("li",null,[s("h3",{id:"建议安装portainer-一个网页管理docker的平台-十分好用",tabindex:"-1"},[i("建议安装Portainer（一个网页管理Docker的平台，十分好用） "),s("a",{class:"header-anchor",href:"#建议安装portainer-一个网页管理docker的平台-十分好用","aria-label":'Permalink to "建议安装Portainer（一个网页管理Docker的平台，十分好用）"'},"​")]),s("ol",null,[s("li",null,[s("p",null,"拉取镜像（得先在前面配置完加速器）"),s("ol",null,[s("li",null,[s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," pull"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 6053537/portainer-ce")])])]),s("button",{class:"code-block-unfold-btn"})])])])]),s("li",null,[s("p",null,"创建数据卷"),s("ol",null,[s("li",null,[s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," volume"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," create"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," portainer_data")])])]),s("button",{class:"code-block-unfold-btn"})])])])]),s("li",null,[s("p",null,"启动 Portainer"),s("ol",null,[s("li",null,[s("div",{class:"language-bash"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"bash"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," docker"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," run"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -d"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --name"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," portainer"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -p"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 9000:9000"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," --restart=always"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -v"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," /var/run/docker.sock:/var/run/docker.sock"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," -v"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," portainer_data:/data"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 6053537/portainer-ce")])])]),s("button",{class:"code-block-unfold-btn"})])])])]),s("li",null,[s("p",null,"访问 Portainer Web 界面"),s("ol",null,[s("li",null,[s("div",{class:"language-http"},[s("button",{title:"Copy code",class:"copy"}),s("span",{class:"lang"},"http"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," http://localhost:9000/")])])]),s("button",{class:"code-block-unfold-btn"})])])])])])]),s("li",null,[s("h3",{id:"常用命令",tabindex:"-1"},[i("常用命令 "),s("a",{class:"header-anchor",href:"#常用命令","aria-label":'Permalink to "常用命令"'},"​")]),s("ol",null,[s("li",null,[s("table",null,[s("thead",null,[s("tr",null,[s("th",null,"含义"),s("th",null,"命令")])]),s("tbody",null,[s("tr",null,[s("td",null,"看实时日志"),s("td",null,[s("code",null,"docker compose logs -f")])]),s("tr",null,[s("td",null,"停compose容器"),s("td",null,[s("code",null,"docker compose stop ")])]),s("tr",null,[s("td",null,"停/删compose容器+网络"),s("td",null,[s("code",null,"docker compose down"),i("（加 "),s("code",null,"-v"),i(" 同时删具名卷）")])]),s("tr",null,[s("td",null,"停独立docker容器"),s("td",null,[s("code",null,"docker stop xxx")])]),s("tr",null,[s("td",null,"删独立docker容器"),s("td",null,[s("code",null,"docker rm xxx")])]),s("tr",null,[s("td",null,"重启单个服务"),s("td",null,[s("code",null,"docker compose restart xxx")])]),s("tr",null,[s("td",null,"重编镜像"),s("td",null,[s("code",null,"docker compose build"),i(" 或 "),s("code",null,"up --build")])]),s("tr",null,[s("td",null,"扩容"),s("td",null,[s("code",null,"docker compose up -d --scale web=3")])]),s("tr",null,[s("td",null,"清理无用镜像"),s("td",null,[s("code",null,"docker image prune -f")])]),s("tr",null,[s("td",null,"进入容器"),s("td",null,[s("code",null,"docker compose exec xxx bash")])])])])]),s("li",null,[s("p",null,[i("关于"),s("code",null,"docker compose exec xxx bash"),i("的延伸")]),s("ol",null,[s("li",null,[s("code",null,"docker exec"),i("：在指定容器中运行命令。")]),s("li",null,[s("code",null,"-it"),i("："),s("code",null,"-i"),i(" 表示交互式（保持输入流打开），"),s("code",null,"-t"),i(" 表示分配伪终端（提供终端界面）。")]),s("li",null,[s("code",null,"xxx"),i("：容器名称（必须是正在运行的容器）。")]),s("li",null,[s("code",null,"sh"),i("：启动 shell 程序（通常是 bash）")])])])])])],-1)),n[3]||(n[3]=s("hr",null,null,-1)),n[4]||(n[4]=s("p",null,[i("引用链接："),s("a",{href:"https://help.aliyun.com/zh/ecs/user-guide/install-and-use-docker#8dca4cfa3dn0e",target:"_blank",rel:"noreferrer"},"安装并使用Docker和Docker Compose")],-1))]),"main-header":l(()=>[e(a.$slots,"main-header")]),"main-header-after":l(()=>[e(a.$slots,"main-header-after")]),"main-nav":l(()=>[e(a.$slots,"main-nav")]),"main-content-before":l(()=>[e(a.$slots,"main-content-before")]),"main-content":l(()=>[e(a.$slots,"main-content")]),"main-content-after":l(()=>[e(a.$slots,"main-content-after")]),"main-nav-before":l(()=>[e(a.$slots,"main-nav-before")]),"main-nav-after":l(()=>[e(a.$slots,"main-nav-after")]),comment:l(()=>[e(a.$slots,"comment")]),footer:l(()=>[e(a.$slots,"footer")]),aside:l(()=>[e(a.$slots,"aside")]),"aside-custom":l(()=>[e(a.$slots,"aside-custom")]),default:l(()=>[e(a.$slots,"default")]),_:3},8,["frontmatter"])}}};export{q as default,B as usePageData};
